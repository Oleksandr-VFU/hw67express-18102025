# Express —Å–µ—Ä–≤–µ—Ä –∑ MongoDB Atlas —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é

## –û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —î **—ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é MongoDB Atlas –∑ —ñ—Å–Ω—É—é—á–∏–º Express.js —Å–µ—Ä–≤–µ—Ä–æ–º** –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è. –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–æ–∫—É—Å - **–ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ MongoDB Atlas** —è–∫ –æ—Å–Ω–æ–≤–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö –∑–∞–º—ñ—Å—Ç—å mock –¥–∞–Ω–∏—Ö —Ç–∞ **—Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—Å—ñ—Ö –æ—Å–Ω–æ–≤–Ω–∏—Ö MongoDB –æ–ø–µ—Ä–∞—Ü—ñ–π**.

**üéØ MongoDB –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è:**
- ‚úÖ **MongoDB Atlas –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è**: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ö–º–∞—Ä–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π –∑ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
- ‚úÖ **CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó**: –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—ñ CREATE, READ, UPDATE, DELETE –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ **insertOne/insertMany**: –î–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —Ç–∞ –±–∞–≥–∞—Ç—å–æ—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- ‚úÖ **updateOne/updateMany/replaceOne**: –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–º—ñ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- ‚úÖ **deleteOne/deleteMany**: –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —Ç–∞ –±–∞–≥–∞—Ç—å–æ—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
- ‚úÖ **find –∑ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏**: –†–æ–∑—à–∏—Ä–µ–Ω–µ —á–∏—Ç–∞–Ω–Ω—è –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ —Ç–∞ –≤–∏–±–æ—Ä–æ–º –ø–æ–ª—ñ–≤
- ‚úÖ **–î–∏–Ω–∞–º—ñ—á–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç**: –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö
- ‚úÖ **–í–∏–¥–∞–ª–µ–Ω–Ω—è mock –¥–∞–Ω–∏—Ö**: –ü–æ–≤–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É –ë–î

## –ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

**–£—Å–ø–∞–¥–∫–æ–≤–∞–Ω–æ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É:**
- Express.js 5.1.0 —Å–µ—Ä–≤–µ—Ä
- ‚úÖ **Passport.js –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∑ MongoDB —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é** (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω—É –ø–æ–º–∏–ª–∫—É)
- –ë–µ–∑–ø–µ—á–Ω—ñ —Å–µ—Å—ñ—ó –∑ file storage
- Pug + EJS —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏
- –ó–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –∑ —Ä–æ–ª—è–º–∏

## MongoDB Atlas —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è

**–ö–ª—é—á–æ–≤—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:**
- **MongoDB Atlas + MongoDB Driver 6.20.0** - —Ö–º–∞—Ä–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó** - –ø–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ async/await
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** - seedDatabase.mjs
- **–ü–æ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä MongoDB –æ–ø–µ—Ä–∞—Ü—ñ–π** - insertOne/Many, updateOne/Many, replaceOne, deleteOne/Many, find

## –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

### üéØ **MongoDB Atlas –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è + –†–æ–∑—à–∏—Ä–µ–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó**
**–ü–æ–≤–Ω–∞ –∑–∞–º—ñ–Ω–∞ mock –¥–∞–Ω–∏—Ö –Ω–∞ —Ä–µ–∞–ª—å–Ω—É —Ö–º–∞—Ä–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö –∑ –Ω–æ–≤–∏–º–∏ MongoDB –º–µ—Ç–æ–¥–∞–º–∏**

#### 1. **–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è MongoDB Atlas** üîó
- ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ **–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π MongoDB Node.js Driver 6.20.0**
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ **–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB Atlas** –∑ URI —Ç–∞ –Ω–∞–∑–≤–æ—é –ë–î
- ‚úÖ –†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è–º ping
- ‚úÖ –î–æ–¥–∞–Ω–æ **–∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è –∑'—î–¥–Ω–∞–Ω–Ω—è** –ø—Ä–∏ –∑—É–ø–∏–Ω—Ü—ñ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ **–µ–∫—Å–ø–æ—Ä—Ç db —Ç–∞ client** –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –º–æ–¥–µ–ª—è—Ö

#### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö** üöÄ
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ **seedDatabase.mjs** –∑ —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
- ‚úÖ **13 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ä–æ–ª—è–º–∏ (admin, editor, moderator, user)
- ‚úÖ **11 —Å—Ç–∞—Ç–µ–π** –∑ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é
- ‚úÖ **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –¥—É–±–ª—é–≤–∞–Ω–Ω—è** - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** –ø—Ä–æ—Ü–µ—Å—É —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

#### 3. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (insertOne/insertMany)** üìù
- ‚úÖ **POST /users/insertOne** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ **POST /users/insertMany** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ‚úÖ **POST /articles/insertOne** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ
- ‚úÖ **POST /articles/insertMany** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ç–∞—Ç–µ–π
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è ID** - —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ñ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏
- ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö** –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –¥–æ–¥–∞–≤–∞–Ω–Ω—è–º –º–µ—Ç–∞–¥–∞–Ω–∏—Ö

#### 4. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (updateOne/updateMany/replaceOne)** üîÑ
- ‚úÖ **PUT /users/updateOne** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **PUT /users/updateMany** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **PUT /users/replaceOne** - –ø–æ–≤–Ω–∞ –∑–∞–º—ñ–Ω–∞ –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚úÖ **PUT /articles/updateOne** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **PUT /articles/updateMany** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ç–∞—Ç–µ–π –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **PUT /articles/replaceOne** - –ø–æ–≤–Ω–∞ –∑–∞–º—ñ–Ω–∞ –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è updatedAt** –ø—Ä–∏ –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ—è—Ö

#### 5. **–í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (deleteOne/deleteMany)** üóëÔ∏è
- ‚úÖ **DELETE /users/deleteOne** - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **DELETE /users/deleteMany** - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **DELETE /articles/deleteOne** - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **DELETE /articles/deleteMany** - –≤–∏–¥–∞–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ç–∞—Ç–µ–π –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
- ‚úÖ **–ë–µ–∑–ø–µ—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è** –∑ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –≤–∏–¥–∞–ª–µ–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π** - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö/–≤–∏–¥–∞–ª–µ–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

#### 6. **–†–æ–∑—à–∏—Ä–µ–Ω–µ —á–∏—Ç–∞–Ω–Ω—è (find –∑ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏)** üîç
- ‚úÖ **GET /users/find** - –ø–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ —Ç–∞ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏
- ‚úÖ **GET /articles/find** - –ø–æ—à—É–∫ —Å—Ç–∞—Ç–µ–π –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ —Ç–∞ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏
- ‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ MongoDB query —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É** —É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö filter —Ç–∞ projection
- ‚úÖ **–ì–Ω—É—á–∫—ñ –ø—Ä–æ–µ–∫—Ü—ñ—ó** - –≤–∏–±—ñ—Ä —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –ø–æ–ª—ñ–≤
- ‚úÖ **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ —Ñ—ñ–ª—å—Ç—Ä–∏** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—Å—ñ—Ö MongoDB –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤

#### 7. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Passport.js –∑ MongoDB** üîê
- ‚úÖ **Passport LocalStrategy –∑ MongoDB**: –ü–æ–≤–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑ —Ä–µ–∞–ª—å–Ω–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: –ó–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —á–µ—Ä–µ–∑ UserModel.findByEmail()
- ‚úÖ **–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è**: –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å–µ—Å—ñ–π –∑ MongoDB –¥–∞–Ω–∏–º–∏
- ‚úÖ **Bcrypt —Ö–µ—à—É–≤–∞–Ω–Ω—è**: –ë–µ–∑–ø–µ—á–Ω–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ –≤ MongoDB
- ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ MongoDB –∑–∞–ø–∏—Ç–∏

#### 8. **–û–ø–µ—Ä–∞—Ü—ñ—ó —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö** üìñ
- ‚úÖ **–ü–æ–≤–Ω–∞ –∑–∞–º—ñ–Ω–∞ mock –º–æ–¥–µ–ª–µ–π** –Ω–∞ MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—ó
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ CRUD –º–µ—Ç–æ–¥–∏** –∑ async/await
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ª—ñ—á—ñ–ª—å–Ω–∏–∫–∏**: –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤ —Å—Ç–∞—Ç–µ–π
- ‚úÖ **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫** –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –ª–æ–≥—É–≤–∞–Ω–Ω—è–º

#### 9. **–î–∏–Ω–∞–º—ñ—á–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö** üñ•Ô∏è
- ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–æ Pug —à–∞–±–ª–æ–Ω–∏** –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–æ EJS —à–∞–±–ª–æ–Ω–∏** –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö —Å—Ç–∞—Ç–µ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è**: —ñ–º–µ–Ω–∞, —Ä–æ–ª—ñ, –¥–∞—Ç–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ **JSON API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ** –∑ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏

### üîê **–ë–∞–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å (—É—Å–ø–∞–¥–∫–æ–≤–∞–Ω–æ)**
- Passport.js –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –∑ LocalStrategy
- –ë–µ–∑–ø–µ—á–Ω—ñ —Å–µ—Å—ñ—ó –∑ 7-–¥–µ–Ω–Ω–∏–º —Ç–µ—Ä–º—ñ–Ω–æ–º –∂–∏—Ç—Ç—è
- –ó–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é —Ä–æ–ª–µ–π
- –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ —Ç–∞ —Ç–µ–º–∏ —á–µ—Ä–µ–∑ cookies
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∑–≥—ñ–¥–Ω–æ –±—ñ–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

## –¢–µ—Å—Ç–æ–≤—ñ –∞–∫–∞—É–Ω—Ç–∏
- `admin@example.com` / `admin123` - –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø
- `user@example.com` / `user123` - –±–∞–∑–æ–≤–∏–π –¥–æ—Å—Ç—É–ø

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç—É

### üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è –≤–∏–∫–ª–∞–¥–∞—á–∞/—Ç–µ—Å—Ç—É–≤–∞–ª—å–Ω–∏–∫–∞

**–ë–µ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ MongoDB Atlas - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –≥–æ—Ç–æ–≤—É –ë–î:**

```bash
# 1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
npm install

# 2. –°—Ç–≤–æ—Ä—ñ—Ç—å .env —Ñ–∞–π–ª –∑ –≥–æ—Ç–æ–≤–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
cp .env.example .env

# 3. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
npm start
```

**–ì–æ—Ç–æ–≤–æ!** –î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –≥–æ—Ç–æ–≤–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö (13 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ + 11 —Å—Ç–∞—Ç–µ–π)
- –°–µ—Ä–≤–µ—Ä: http://localhost:3000
- –õ–æ–≥—ñ–Ω: `admin@example.com` / `admin123`

---

### ÔøΩÔ∏è –ü–æ–≤–Ω–∞ —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

**–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –ë–î (—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è):**

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
```bash
npm install
```

### 2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB Atlas

**üéØ –í–ê–†–Ü–ê–ù–¢ –ê: –ì–û–¢–û–í–ê –ë–î (—Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è - –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)**
```bash
# –ü—Ä–æ—Å—Ç–æ —Å–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∂–µ –≥–æ—Ç–æ–≤—ñ
cp .env.example .env
```

**üìö –í–ê–†–Ü–ê–ù–¢ –ë: –í–õ–ê–°–ù–ê –ë–î (–ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø - –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏)**

1. **–°—Ç–≤–æ—Ä—ñ—Ç—å –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [MongoDB Atlas](https://www.mongodb.com/atlas)**
2. **–°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –∫–ª–∞—Å—Ç–µ—Ä** (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π M0 Sandbox)
3. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –º–µ—Ä–µ–∂—ñ:** –¥–æ–¥–∞–π—Ç–µ `0.0.0.0/0` (–≤—Å—ñ IP)
4. **–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö** –∑ –ø—Ä–∞–≤–∞–º–∏ —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å—É
5. **–û—Ç—Ä–∏–º–∞–π—Ç–µ connection string** —á–µ—Ä–µ–∑ "Connect" ‚Üí "Connect your application"

6. **–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ .env —Ñ–∞–π–ª:**
```env
# –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à –≤–ª–∞—Å–Ω–∏–π URI –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
MONGODB_URI=mongodb+srv://your_username:your_password@your_cluster.mongodb.net/?retryWrites=true&w=majority
DB_NAME=blog
SESSION_SECRET=your-secure-secret-key
PORT=3000
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
npm start
```

**üöÄ –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**
- –ü—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ MongoDB Atlas
- –°—Ç–≤–æ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö `blog`
- –î–æ–¥–∞—Å—Ç—å 13 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ 11 —Å—Ç–∞—Ç–µ–π

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –ë–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ .env —Ñ–∞–π–ª—É –¥–æ–¥–∞—Ç–æ–∫ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è!

–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞: **http://localhost:3000**

## üîê –†—ñ–≤–Ω—ñ –¥–æ—Å—Ç—É–ø—É

### –ì–æ—Ç–æ–≤–∞ –ë–î –∞–≤—Ç–æ—Ä–∞ (readonly)
- ‚úÖ **–ü–µ—Ä–µ–≥–ª—è–¥** –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —Å—Ç–∞—Ç–µ–π
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è** —á–µ—Ä–µ–∑ —ñ—Å–Ω—É—é—á—ñ –∞–∫–∞—É–Ω—Ç–∏
- ‚úÖ **–ù–∞–≤—ñ–≥–∞—Ü—ñ—è** –ø–æ –≤—Å—ñ—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö
- ‚ùå **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è/—Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ (—Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è)

### –í–ª–∞—Å–Ω–∞ –ë–î (–ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø)  
- ‚úÖ **–í—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó** –≥–æ—Ç–æ–≤–æ—ó –ë–î
- ‚úÖ **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è** –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —á–µ—Ä–µ–∑ API
- ‚úÖ **–†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è** —Å—Ç–∞—Ç–µ–π —á–µ—Ä–µ–∑ API
- ‚úÖ **–í–∏–¥–∞–ª–µ–Ω–Ω—è** –∑–∞–ø–∏—Å—ñ–≤ —á–µ—Ä–µ–∑ API

## –¢–µ—Å—Ç–æ–≤—ñ –∞–∫–∞—É–Ω—Ç–∏
**–î–ª—è –æ–±–æ—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –ë–î:**
- `admin@example.com` / `admin123` - –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- `user@example.com` / `user123` - –±–∞–∑–æ–≤–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

## Environment –ó–º—ñ–Ω–Ω—ñ

–ü—Ä–æ–µ–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞—Å—Ç—É–ø–Ω—ñ environment –∑–º—ñ–Ω–Ω—ñ:

```env
# .env —Ñ–∞–π–ª (—Å—Ç–≤–æ—Ä—ñ—Ç—å –∑ .env.example)
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/?retryWrites=true&w=majority
DB_NAME=blog
SESSION_SECRET=your-secure-secret-key
PORT=3000
NODE_ENV=development
```

**–û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ:**
- `MONGODB_URI` - –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π MongoDB Atlas connection string
- `DB_NAME` - –Ω–∞–∑–≤–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è: "blog")
- `SESSION_SECRET` - —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –¥–ª—è –ø—ñ–¥–ø–∏—Å—É —Å–µ—Å—ñ–π

**–û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:**
- `PORT` - –ø–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 3000)
- `NODE_ENV` - —Ä–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏ (development/production)

## API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏

### –ë–∞–∑–æ–≤—ñ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó

#### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ
- `GET /users` - –≤—Å—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (HTML/JSON)
- `GET /users/:id` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
- `POST /users` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (–∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é)
- `PUT /users/:id` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é)
- `DELETE /users/:id` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è

#### –°—Ç–∞—Ç—Ç—ñ
- `GET /articles` - –≤—Å—ñ —Å—Ç–∞—Ç—Ç—ñ (HTML/JSON)
- `GET /articles/:id` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ —Å—Ç–∞—Ç—Ç—è
- `POST /articles` - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è (–∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é)
- `PUT /articles/:id` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é)
- `DELETE /articles/:id` - –≤–∏–¥–∞–ª–µ–Ω–Ω—è

#### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- `POST /auth/login` - –≤—Ö—ñ–¥
- `POST /auth/register` - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
- `POST /auth/logout` - –≤–∏—Ö—ñ–¥

### –ù–æ–≤—ñ MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—ó

#### **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (insertOne/insertMany)**

##### **POST /users/insertOne** - –î–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```bash
curl -X POST http://localhost:3000/users/insertOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "username": "newuser",
    "firstName": "–Ü–≤–∞–Ω",
    "lastName": "–ù–æ–≤–µ–Ω—å–∫–∏–π",
    "email": "ivan@example.com",
    "password": "password123",
    "role": "user"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ",
  "user": {
    "_id": 14,
    "username": "newuser",
    "firstName": "–Ü–≤–∞–Ω",
    "lastName": "–ù–æ–≤–µ–Ω—å–∫–∏–π",
    "email": "ivan@example.com",
    "role": "user",
    "isActive": true,
    "createdAt": "2024-10-17T20:30:15.123Z",
    "updatedAt": "2024-10-17T20:30:15.123Z"
  }
}
```

##### **POST /users/insertMany** - –î–æ–¥–∞–≤–∞–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
```bash
curl -X POST http://localhost:3000/users/insertMany \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '[
    {
      "username": "user1",
      "firstName": "–ü–µ—Ç—Ä–æ",
      "lastName": "–ü–µ—Ä—à–∏–π",
      "email": "petro@example.com",
      "password": "pass123",
      "role": "user"
    },
    {
      "username": "user2",
      "firstName": "–ú–∞—Ä—ñ—è",
      "lastName": "–î—Ä—É–≥–∞",
      "email": "maria@example.com",
      "password": "pass456",
      "role": "editor"
    }
  ]'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–£—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ 2 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤",
  "users": [
    {
      "_id": 15,
      "username": "user1",
      "firstName": "–ü–µ—Ç—Ä–æ",
      "lastName": "–ü–µ—Ä—à–∏–π",
      "email": "petro@example.com",
      "role": "user",
      "isActive": true,
      "createdAt": "2024-10-17T20:30:15.123Z",
      "updatedAt": "2024-10-17T20:30:15.123Z"
    },
    {
      "_id": 16,
      "username": "user2",
      "firstName": "–ú–∞—Ä—ñ—è",
      "lastName": "–î—Ä—É–≥–∞",
      "email": "maria@example.com",
      "role": "editor",
      "isActive": true,
      "createdAt": "2024-10-17T20:30:15.123Z",
      "updatedAt": "2024-10-17T20:30:15.123Z"
    }
  ]
}
```

##### **POST /articles/insertOne** - –î–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ
```bash
curl -X POST http://localhost:3000/articles/insertOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "title": "–ù–æ–≤–∞ —Å—Ç–∞—Ç—Ç—è –ø—Ä–æ Node.js",
    "content": "–¶–µ –¥–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç—Ç—è –ø—Ä–æ —Ä–æ–∑—Ä–æ–±–∫—É –∑ Node.js...",
    "category": "–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è",
    "tags": ["Node.js", "JavaScript", "Backend"],
    "isPublished": true
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–°—Ç–∞—Ç—Ç—é —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ",
  "article": {
    "_id": 12,
    "title": "–ù–æ–≤–∞ —Å—Ç–∞—Ç—Ç—è –ø—Ä–æ Node.js",
    "content": "–¶–µ –¥–µ—Ç–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç—Ç—è –ø—Ä–æ —Ä–æ–∑—Ä–æ–±–∫—É –∑ Node.js...",
    "authorId": 1,
    "authorName": "–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä",
    "category": "–ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è",
    "tags": ["Node.js", "JavaScript", "Backend"],
    "views": 0,
    "likes": 0,
    "isPublished": true,
    "createdAt": "2024-10-17T20:30:15.123Z",
    "updatedAt": "2024-10-17T20:30:15.123Z"
  }
}
```

##### **POST /articles/insertMany** - –î–æ–¥–∞–≤–∞–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ç–∞—Ç–µ–π
```bash
curl -X POST http://localhost:3000/articles/insertMany \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '[
    {
      "title": "–ü–µ—Ä—à–∞ —Å—Ç–∞—Ç—Ç—è",
      "content": "–ö–æ–Ω—Ç–µ–Ω—Ç –ø–µ—Ä—à–æ—ó —Å—Ç–∞—Ç—Ç—ñ...",
      "category": "–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó",
      "tags": ["tech"],
      "isPublished": true
    },
    {
      "title": "–î—Ä—É–≥–∞ —Å—Ç–∞—Ç—Ç—è",
      "content": "–ö–æ–Ω—Ç–µ–Ω—Ç –¥—Ä—É–≥–æ—ó —Å—Ç–∞—Ç—Ç—ñ...",
      "category": "–û—Å–≤—ñ—Ç–∞",
      "tags": ["education"],
      "isPublished": false
    }
  ]'
```

#### **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (updateOne/updateMany/replaceOne)**

##### **PUT /users/updateOne** - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X PUT http://localhost:3000/users/updateOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "email": "ivan@example.com" },
    "update": { 
      "firstName": "–Ü–≤–∞–Ω –û–Ω–æ–≤–ª–µ–Ω–∏–π",
      "role": "editor"
    }
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É—Å–ø—ñ—à–Ω–æ –æ–Ω–æ–≤–ª–µ–Ω–æ",
  "user": {
    "_id": 14,
    "username": "newuser",
    "firstName": "–Ü–≤–∞–Ω –û–Ω–æ–≤–ª–µ–Ω–∏–π",
    "lastName": "–ù–æ–≤–µ–Ω—å–∫–∏–π",
    "email": "ivan@example.com",
    "role": "editor",
    "isActive": true,
    "createdAt": "2024-10-17T20:30:15.123Z",
    "updatedAt": "2024-10-17T20:35:22.456Z"
  }
}
```

##### **PUT /users/updateMany** - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X PUT http://localhost:3000/users/updateMany \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "role": "user" },
    "update": { "isActive": false }
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–û–Ω–æ–≤–ª–µ–Ω–æ 3 –∑ 5 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤",
  "matchedCount": 5,
  "modifiedCount": 3
}
```

##### **PUT /users/replaceOne** - –ü–æ–≤–Ω–∞ –∑–∞–º—ñ–Ω–∞ –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```bash
curl -X PUT http://localhost:3000/users/replaceOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "_id": 14 },
    "replacement": {
      "username": "completely_new",
      "firstName": "–ü–æ–≤–Ω—ñ—Å—Ç—é",
      "lastName": "–ù–æ–≤–∏–π",
      "email": "new@example.com",
      "password": "newpass123",
      "role": "moderator",
      "isActive": true
    }
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É—Å–ø—ñ—à–Ω–æ –∑–∞–º—ñ–Ω–µ–Ω–æ",
  "user": {
    "_id": 14,
    "username": "completely_new",
    "firstName": "–ü–æ–≤–Ω—ñ—Å—Ç—é",
    "lastName": "–ù–æ–≤–∏–π",
    "email": "new@example.com",
    "role": "moderator",
    "isActive": true,
    "createdAt": "2024-10-17T20:30:15.123Z",
    "updatedAt": "2024-10-17T20:40:10.789Z"
  }
}
```

##### **PUT /articles/updateOne** - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X PUT http://localhost:3000/articles/updateOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "title": "–ù–æ–≤–∞ —Å—Ç–∞—Ç—Ç—è –ø—Ä–æ Node.js" },
    "update": { 
      "title": "–û–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç—Ç—è –ø—Ä–æ Node.js",
      "views": 100,
      "likes": 10
    }
  }'
```

##### **PUT /articles/updateMany** - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ç–∞—Ç–µ–π –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X PUT http://localhost:3000/articles/updateMany \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "category": "–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó" },
    "update": { "isPublished": true }
  }'
```

##### **PUT /articles/replaceOne** - –ü–æ–≤–Ω–∞ –∑–∞–º—ñ–Ω–∞ –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ
```bash
curl -X PUT http://localhost:3000/articles/replaceOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "_id": 12 },
    "replacement": {
      "title": "–ü–æ–≤–Ω—ñ—Å—Ç—é –Ω–æ–≤–∞ —Å—Ç–∞—Ç—Ç—è",
      "content": "–¶—ñ–ª–∫–æ–º –Ω–æ–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—Ç—ñ...",
      "category": "–ù–æ–≤–∏–Ω–∏",
      "tags": ["–Ω–æ–≤–∏–Ω–∏", "–æ–Ω–æ–≤–ª–µ–Ω–Ω—è"],
      "isPublished": true
    }
  }'
```

#### **–í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö (deleteOne/deleteMany)**

##### **DELETE /users/deleteOne** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X DELETE http://localhost:3000/users/deleteOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "email": "ivan@example.com" }
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ü–≤–∞–Ω –ù–æ–≤–µ–Ω—å–∫–∏–π —É—Å–ø—ñ—à–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–æ",
  "deletedUser": {
    "_id": 14,
    "username": "newuser",
    "firstName": "–Ü–≤–∞–Ω",
    "lastName": "–ù–æ–≤–µ–Ω—å–∫–∏–π",
    "email": "ivan@example.com",
    "role": "user",
    "isActive": true,
    "createdAt": "2024-10-17T20:30:15.123Z",
    "updatedAt": "2024-10-17T20:30:15.123Z"
  }
}
```

##### **DELETE /users/deleteMany** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X DELETE http://localhost:3000/users/deleteMany \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "isActive": false }
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–£—Å–ø—ñ—à–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–æ 3 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤",
  "deletedCount": 3
}
```

##### **DELETE /articles/deleteOne** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X DELETE http://localhost:3000/articles/deleteOne \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "title": "–°—Ç–∞—Ç—Ç—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è" }
  }'
```

##### **DELETE /articles/deleteMany** - –í–∏–¥–∞–ª–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö —Å—Ç–∞—Ç–µ–π –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–æ–º
```bash
curl -X DELETE http://localhost:3000/articles/deleteMany \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "filter": { "isPublished": false }
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–£—Å–ø—ñ—à–Ω–æ –≤–∏–¥–∞–ª–µ–Ω–æ 2 —Å—Ç–∞—Ç–µ–π",
  "deletedCount": 2
}
```

#### **–†–æ–∑—à–∏—Ä–µ–Ω–µ —á–∏—Ç–∞–Ω–Ω—è (find –∑ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏)**

##### **GET /users/find** - –ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ —Ç–∞ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏
```bash
# –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ—Ö –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤, –ø–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ —ñ–º'—è —Ç–∞ email
curl "http://localhost:3000/users/find?filter=%7B%22role%22%3A%22admin%22%7D&projection=%7B%22firstName%22%3A1%2C%22lastName%22%3A1%2C%22email%22%3A1%7D" \
  -H "Accept: application/json" \
  -b cookies.txt

# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π filter: {"role":"admin"}
# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π projection: {"firstName":1,"lastName":1,"email":1}
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–ó–Ω–∞–π–¥–µ–Ω–æ 1 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤",
  "users": [
    {
      "_id": 1,
      "firstName": "–û–ª–µ–∫—Å–∞–Ω–¥—Ä",
      "lastName": "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä",
      "email": "admin@example.com"
    }
  ]
}
```

```bash
# –ó–Ω–∞–π—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ —Ä–æ–ª–ª—é editor –∞–±–æ moderator
curl "http://localhost:3000/users/find?filter=%7B%22isActive%22%3Atrue%2C%22role%22%3A%7B%22%24in%22%3A%5B%22editor%22%2C%22moderator%22%5D%7D%7D&projection=%7B%22username%22%3A1%2C%22role%22%3A1%7D" \
  -H "Accept: application/json" \
  -b cookies.txt

# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π filter: {"isActive":true,"role":{"$in":["editor","moderator"]}}
# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π projection: {"username":1,"role":1}
```

##### **GET /articles/find** - –ü–æ—à—É–∫ —Å—Ç–∞—Ç–µ–π –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ —Ç–∞ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏
```bash
# –ó–Ω–∞–π—Ç–∏ –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω—ñ —Å—Ç–∞—Ç—Ç—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó "–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó", –ø–æ–∫–∞–∑–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–∞ –∞–≤—Ç–æ—Ä–∞
curl "http://localhost:3000/articles/find?filter=%7B%22isPublished%22%3Atrue%2C%22category%22%3A%22%D0%A2%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D1%96%D1%97%22%7D&projection=%7B%22title%22%3A1%2C%22authorName%22%3A1%2C%22views%22%3A1%7D" \
  -H "Accept: application/json" \
  -b cookies.txt

# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π filter: {"isPublished":true,"category":"–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó"}
# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π projection: {"title":1,"authorName":1,"views":1}
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "message": "–ó–Ω–∞–π–¥–µ–Ω–æ 3 —Å—Ç–∞—Ç–µ–π",
  "articles": [
    {
      "_id": 1,
      "title": "–í–≤–µ–¥–µ–Ω–Ω—è –≤ MongoDB –¥–ª—è –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤",
      "authorName": "–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä",
      "views": 1250
    },
    {
      "_id": 2,
      "title": "Express.js —Ç–∞ MongoDB: –ü–æ–≤–Ω–∏–π –≥—ñ–¥",
      "authorName": "–ú–∞—Ä–∏–Ω–∞ –†–µ–¥–∞–∫—Ç–æ—Ä–∫–∞",
      "views": 890
    },
    {
      "_id": 4,
      "title": "Aggregation Pipeline –≤ MongoDB",
      "authorName": "–û–ª–µ–∫—Å–∞–Ω–¥—Ä –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä",
      "views": 567
    }
  ]
}
```

```bash
# –ó–Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—Ç—ñ –∑ —Ç–µ–≥–æ–º "MongoDB" –∑ –±—ñ–ª—å—à –Ω—ñ–∂ 500 –ø–µ—Ä–µ–≥–ª—è–¥–∞–º–∏
curl "http://localhost:3000/articles/find?filter=%7B%22tags%22%3A%22MongoDB%22%2C%22views%22%3A%7B%22%24gt%22%3A500%7D%7D&projection=%7B%22title%22%3A1%2C%22views%22%3A1%2C%22likes%22%3A1%7D" \
  -H "Accept: application/json" \
  -b cookies.txt

# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π filter: {"tags":"MongoDB","views":{"$gt":500}}
# URL –¥–µ–∫–æ–¥–æ–≤–∞–Ω–∏–π projection: {"title":1,"views":1,"likes":1}
```

## –§–∞–π–ª–æ–≤–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
hw02-mongodb/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ server.mjs              # –ì–æ–ª–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä –∑ MongoDB Atlas –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seedDatabase.mjs    # üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ passport.mjs        # Passport LocalStrategy
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.mjs           # üîÑ MongoDB CRUD + –Ω–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Article.mjs        # üîÑ MongoDB CRUD + –Ω–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.mjs          # –ï–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.mjs # üîÑ –°–ø—Ä–æ—â–µ–Ω—ñ CRUD + MongoDB –º–µ—Ç–æ–¥–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ArticleController.mjs # üîÑ –°–ø—Ä–æ—â–µ–Ω—ñ CRUD + MongoDB –º–µ—Ç–æ–¥–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.mjs          # –ï–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ routes/                # üîÑ –ú–∞—Ä—à—Ä—É—Ç–∏ –∑ –Ω–æ–≤–∏–º–∏ endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.mjs          # CRUD + insertOne/Many, updateOne/Many, —Ç–æ—â–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ articles.mjs       # CRUD + insertOne/Many, updateOne/Many, —Ç–æ—â–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.mjs           # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.mjs       # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ views/                 # üîÑ Pug/EJS —à–∞–±–ª–æ–Ω–∏ –¥–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/             # Pug —à–∞–±–ª–æ–Ω–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ articles/          # EJS —à–∞–±–ª–æ–Ω–∏ —Å—Ç–∞—Ç–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/              # –°—Ç–æ—Ä—ñ–Ω–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ home/              # –ì–æ–ª–æ–≤–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ middleware/            # Middleware –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ public/                    # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ sessions/                  # Persistent —Å–µ—Å—ñ—ó
‚îú‚îÄ‚îÄ .env                      # üÜï Environment –∑–º—ñ–Ω–Ω—ñ (MongoDB URI)
‚îú‚îÄ‚îÄ package.json              # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ MongoDB driver
‚îî‚îÄ‚îÄ README.md                 # –¶—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

### –û—Å–Ω–æ–≤–Ω—ñ
- `express` 5.1.0 - –≤–µ–± —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `mongodb` 6.20.0 - **üÜï MongoDB Driver –¥–ª—è –Ω–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π**
- `passport` 0.7.0 - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- `express-session` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏
- `bcryptjs` - —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- `pug` / `ejs` - —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏
- `dotenv` - **üÜï Environment –∑–º—ñ–Ω–Ω—ñ**

### –†–æ–∑—Ä–æ–±–∫–∞
- `nodemon` - –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Backend**: Node.js + Express.js 5.1.0
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: **üÜï MongoDB Atlas** (–∑–∞–º—ñ—Å—Ç—å mock –¥–∞–Ω–∏—Ö)
- **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: Passport.js LocalStrategy
- **–°–µ—Å—ñ—ó**: Express-session –∑ file-store
- **–®–∞–±–ª–æ–Ω–∏**: Pug + EJS
- **–ù–æ–≤—ñ MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—ó**: insertOne/insertMany, updateOne/updateMany/replaceOne, deleteOne/deleteMany, find –∑ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏

---

**MongoDB Atlas Integration** ‚úÖ **–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω—ñ—Å—Ç—é!**

**–£ –±—Ä–∞—É–∑–µ—Ä—ñ:**
- –í—ñ–¥–∫—Ä–∏–π—Ç–µ `http://localhost:3000`
- –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —ñ —Å—Ç–∞—Ç–µ–π
- –¢–µ—Å—Ç—É–π—Ç–µ –Ω–æ–≤—ñ API endpoints –∑ curl

**–ß–µ—Ä–µ–∑ MongoDB Atlas:**
- –£–≤—ñ–π–¥—ñ—Ç—å —É —Å–≤—ñ–π –∫–ª–∞—Å—Ç–µ—Ä
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –±–∞–∑–∏ `blog`
- –ü–µ—Ä–µ–≥–ª—è–¥–∞–π—Ç–µ –∫–æ–ª–µ–∫—Ü—ñ—ó `users` —Ç–∞ `articles`

### **–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**

#### **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**
- **–ú–æ–¥–µ–ª—ñ** (`src/models/`): MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—ó (insertOne, updateOne, find, —Ç–æ—â–æ)
- **–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏** (`src/controllers/`): HTTP –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- **–ú–∞—Ä—à—Ä—É—Ç–∏** (`src/routes/`): REST API endpoints –¥–ª—è –∫–æ–∂–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó

#### **–ö–ª—é—á–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –≤ –º–æ–¥–µ–ª—è—Ö:**
```javascript
// UserModel.mjs —Ç–∞ ArticleModel.mjs
static async insertOne(data)              // MongoDB insertOne
static async insertMany(dataArray)       // MongoDB insertMany  
static async updateOneByFilter(filter, update)    // MongoDB updateOne
static async updateManyByFilter(filter, update)   // MongoDB updateMany
static async replaceOneByFilter(filter, replacement) // MongoDB replaceOne
static async deleteOneByFilter(filter)    // MongoDB deleteOne
static async deleteManyByFilter(filter)   // MongoDB deleteMany
static async findWithProjection(filter, projection) // MongoDB find –∑ –ø—Ä–æ–µ–∫—Ü—ñ—è–º–∏
```

#### **HTTP Endpoints:**
- **POST** `/users/insertOne` —Ç–∞ `/articles/insertOne`
- **POST** `/users/insertMany` —Ç–∞ `/articles/insertMany`  
- **PUT** `/users/updateOne` —Ç–∞ `/articles/updateOne`
- **PUT** `/users/updateMany` —Ç–∞ `/articles/updateMany`
- **PUT** `/users/replaceOne` —Ç–∞ `/articles/replaceOne`
- **DELETE** `/users/deleteOne` —Ç–∞ `/articles/deleteOne`
- **DELETE** `/users/deleteMany` —Ç–∞ `/articles/deleteMany`
- **GET** `/users/find` —Ç–∞ `/articles/find`

#### **–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
–î–µ—Ç–∞–ª—å–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏ curl –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ JSON –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π –Ω–∞–≤–µ–¥–µ–Ω—ñ –≤ —Å–µ–∫—Ü—ñ—ó "API –ï–Ω–¥–ø–æ—ñ–Ω—Ç–∏" –≤–∏—â–µ.

## üîß **–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ MongoDB —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó**

### **–ö–æ–ª–µ–∫—Ü—ñ—ó —Ç–∞ —Å—Ö–µ–º–∏**

#### **–ö–æ–ª–µ–∫—Ü—ñ—è `users`:**
```javascript
{
  _id: Number,           // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
  username: String,      // –£–Ω—ñ–∫–∞–ª—å–Ω–µ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞  
  firstName: String,     // –Ü–º'—è
  lastName: String,      // –ü—Ä—ñ–∑–≤–∏—â–µ
  email: String,         // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π email
  password: String,      // –•–µ—à–æ–≤–∞–Ω–∏–π –ø–∞—Ä–æ–ª—å (bcryptjs)
  role: String,          // admin, editor, moderator, user
  isActive: Boolean,     // –°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
  createdAt: Date,       // –î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
  updatedAt: Date,       // –î–∞—Ç–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
  profileImage: String   // –®–ª—è—Ö –¥–æ –∞–≤–∞—Ç–∞—Ä–∞
}
```

#### **–ö–æ–ª–µ–∫—Ü—ñ—è `articles`:**
```javascript
{
  _id: Number,           // –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä
  title: String,         // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—Ç—ñ
  content: String,       // –ü–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—Ç—ñ
  authorId: Number,      // ID –∞–≤—Ç–æ—Ä–∞ –∑ –∫–æ–ª–µ–∫—Ü—ñ—ó users
  authorName: String,    // –Ü–º'—è –∞–≤—Ç–æ—Ä–∞ (–¥–µ–Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–æ)
  category: String,      // –ö–∞—Ç–µ–≥–æ—Ä—ñ—è —Å—Ç–∞—Ç—Ç—ñ
  tags: [String],        // –ú–∞—Å–∏–≤ —Ç–µ–≥—ñ–≤
  views: Number,         // –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤
  likes: Number,         // –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª–∞–π–∫—ñ–≤
  isPublished: Boolean,  // –°—Ç–∞—Ç—É—Å –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó
  createdAt: Date,       // –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
  updatedAt: Date        // –î–∞—Ç–∞ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
}
```

### **–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó**

#### **–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª:**
```javascript
// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ
async function connectToMongoDB() {
  await client.connect();
  db = client.db(dbName);
  await db.admin().ping(); // –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
  await initializeDatabase(db); // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
}

// –ö–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–∫—Ä–∏—Ç—Ç—è –ø—Ä–∏ –∑—É–ø–∏–Ω—Ü—ñ
process.on('SIGINT', async () => {
  await client.close();
  process.exit(0);
});
```

#### **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –¥—É–±–ª—é–≤–∞–Ω–Ω—è:**
```javascript
// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π
const collections = await db.listCollections().toArray();
const collectionNames = collections.map(col => col.name);

if (!collectionNames.includes('users')) {
  // –°—Ç–≤–æ—Ä—é—î–º–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –Ω–µ —ñ—Å–Ω—É—î
}
```

#### **–ì–Ω—É—á–∫–∞ –æ–±—Ä–æ–±–∫–∞ ID:**
```javascript
// –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ string —Ç–∞ number ID
const query = isNaN(userId) 
  ? { _id: userId } 
  : { _id: parseInt(userId) };
```

### **–ü–µ—Ä–µ–≤–∞–≥–∏ MongoDB —Ä—ñ—à–µ–Ω–Ω—è**

#### **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:**
- ‚úÖ **–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –ë–î** –∑–∞–º—ñ—Å—Ç—å –≤ –ø–∞–º'—è—Ç—ñ
- ‚úÖ **–õ—ñ–º—ñ—Ç–æ–≤–∞–Ω—ñ –∑–∞–ø–∏—Ç–∏** –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π
- ‚úÖ **Projection** –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö –ø–æ–ª—ñ–≤

#### **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å:**
- ‚úÖ **MongoDB Atlas** –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è
- ‚úÖ **–†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è** –¥–ª—è –≤–∏—Å–æ–∫–æ—ó –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ
- ‚úÖ **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ —à–∞—Ä–¥—É–≤–∞–Ω–Ω—è** –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ
- ‚úÖ **–ö–µ—à—É–≤–∞–Ω–Ω—è** –Ω–∞ —Ä—ñ–≤–Ω—ñ –¥—Ä–∞–π–≤–µ—Ä–∞

#### **–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å:**
- ‚úÖ **–¢–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫** –∑ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—Å—Ç—é
- ‚úÖ **Aggregation pipeline** –¥–ª—è —Å–∫–ª–∞–¥–Ω–æ—ó –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
- ‚úÖ **–ì–µ–æ–ø—Ä–æ—Å—Ç–æ—Ä–æ–≤—ñ –∑–∞–ø–∏—Ç–∏** (–º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏)
- ‚úÖ **–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó** –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

#### **–ë–µ–∑–ø–µ–∫–∞:**
- ‚úÖ **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** –∑ bcryptjs salt=10
- ‚úÖ **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø—Ä–æ–≥—Ä–∞–º–∏** –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º
- ‚úÖ **HTTPS –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è** –¥–æ Atlas

## üìä **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è**

### **–õ–æ–≥—É–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π:**
```javascript
// –í—Å—ñ MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—ó –ª–æ–≥—É—é—Ç—å—Å—è
console.log('‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ MongoDB Atlas');
console.log('üìÑ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±–∞–∑–∞ –¥–∞–Ω–∏—Ö: blog');
console.log('üèì MongoDB Atlas –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞ ping');

// –ü–æ–º–∏–ª–∫–∏ –∑ –¥–µ—Ç–∞–ª—è–º–∏
console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:', error);
```

### **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ª—ñ—á–∏–ª—å–Ω–∏–∫–∏
await db.collection('articles').updateOne(
  query,
  { $inc: { views: 1 } }
);

// –ê–≥—Ä–µ–≥–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
const stats = await UserModel.getStats();
// { total: 13, active: 12, byRole: [...] }
```

### **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —É MongoDB Atlas:**
- –ü–µ—Ä–µ–≥–ª—è–¥ –∑–∞–ø–∏—Ç—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –∑'—î–¥–Ω–∞–Ω—å —Ç–∞ –æ–ø–µ—Ä–∞—Ü—ñ–π
- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:3000`

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë—Ä–∞—É–∑–µ—Ä–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏
- `http://localhost:3000` - –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é
- `http://localhost:3000/users` - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–ø–æ—Ç—Ä–µ–±—É—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é)
- `http://localhost:3000/articles` - –°—Ç–∞—Ç—Ç—ñ (–ø–æ—Ç—Ä–µ–±—É—î —Ä–æ–ª—å admin)
- `http://localhost:3000/settings` - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–µ–º (–ø—É–±–ª—ñ—á–Ω–æ)
- `http://localhost:3000/protected` - –ó–∞—Ö–∏—â–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ —Å–µ—Å—ñ—é

### API –∑–∞–ø–∏—Ç–∏ –∑ Passport —Å–µ—Å—ñ—è–º–∏
–°–µ—Å—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ express-session –ø—ñ—Å–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó.

**–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–ø–æ—Ç—Ä–µ–±—É—î –∞–∫—Ç–∏–≤–Ω—É —Å–µ—Å—ñ—é):**
```bash
# –°–ø–æ—á–∞—Ç–∫—É –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
# –ü–æ—Ç—ñ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ cookie-jar –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è session cookie
curl http://localhost:3000/users \
  -H "Accept: application/json" \
  --cookie-jar cookies.txt
```

**–°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ø–æ—Ç—Ä–µ–±—É—î –∞–∫—Ç–∏–≤–Ω—É —Å–µ—Å—ñ—é):**
```bash
curl -X POST http://localhost:3000/users \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{"name": "John", "email": "john@example.com"}'
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É —Å–µ—Å—ñ—ó:**
```bash
curl http://localhost:3000/protected \
  -H "Accept: application/json" \
  -b cookies.txt
```

## –ë–µ–∑–ø–µ–∫–∞

### Passport + Express Session
- **httpOnly cookies** - –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ XSS –∞—Ç–∞–∫
- **–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤** —á–µ—Ä–µ–∑ bcryptjs –∑ salt=10
- **Persistent session storage** - —Ñ–∞–π–ª–æ–≤–µ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ—Å—ñ–π
- **–ß–∞—Å –∂–∏—Ç—Ç—è —Å–µ—Å—ñ—ó**: 7 –¥–Ω—ñ–≤ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º
- **CSRF –∑–∞—Ö–∏—Å—Ç** —á–µ—Ä–µ–∑ —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ middleware

### –†—ñ–≤–Ω—ñ –¥–æ—Å—Ç—É–ø—É
- **–ü—É–±–ª—ñ—á–Ω—ñ**: /, /auth/*, /settings/*
- **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ**: /users/* (–∞–∫—Ç–∏–≤–Ω–∞ —Å–µ—Å—ñ—è)
- **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏**: /articles/* (—Å–µ—Å—ñ—è + admin —Ä–æ–ª—å)
- **–ó–∞—Ö–∏—â–µ–Ω–∏–π**: /protected (–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Å–µ—Å—ñ–π–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó)

## –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

### –ü–æ–º–∏–ª–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
- **401 Unauthorized**: –í—ñ–¥—Å—É—Ç–Ω—è –∞–∫—Ç–∏–≤–Ω–∞ —Å–µ—Å—ñ—è
- **403 Forbidden**: –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤ (–Ω–µ admin –¥–ª—è —Å—Ç–∞—Ç–µ–π)
- **Session expired**: –°–µ—Å—ñ—è –∑–∞–∫—ñ–Ω—á–∏–ª–∞—Å—è (7 –¥–Ω—ñ–≤)

### –ó–∞–≥–∞–ª—å–Ω—ñ –ø–æ–º–∏–ª–∫–∏  
- **404 Not Found**: –†–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
- **500 Internal Server Error**: –ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è

## üèóÔ∏è **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è**

### **MongoDB —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è**
- **–û—Ñ—ñ—Ü—ñ–π–Ω–∏–π –¥—Ä–∞–π–≤–µ—Ä**: MongoDB Node.js Driver 6.20.0 –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞**: –ü–æ–≤–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ async/await —É –≤—Å—ñ—Ö —à–∞—Ä–∞—Ö
- **–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è**: –Ñ–¥–∏–Ω–∏–π db –µ–∫—Å–ø–æ—Ä—Ç –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É

### **–ï–≤–æ–ª—é—Ü—ñ—è –≤—ñ–¥ mock –¥–∞–Ω–∏—Ö**
- **–ë—É–ª–æ**: –°—Ç–∞—Ç–∏—á–Ω—ñ –º–∞—Å–∏–≤–∏ —É `mockData.mjs`
- **–°—Ç–∞–ª–æ**: –î–∏–Ω–∞–º—ñ—á–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ MongoDB Atlas
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å, —Ä–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ

### **–ú–æ–¥—É–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- **–ú–æ–¥–µ–ª—ñ**: –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—ñ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ MongoDB
- **–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫  
- **View –∫–ª–∞—Å–∏**: –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **–®–∞–±–ª–æ–Ω–∏**: –î–∏–Ω–∞–º—ñ—á–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑ MongoDB

### **–û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö**
```javascript
// –ü–æ—Ç—ñ–∫ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤ –∑ MongoDB:
GET /users ‚Üí UserController ‚Üí 
  await UserModel.getAll() ‚Üí 
  MongoDB Query ‚Üí 
  Pug Template ‚Üí HTML

GET /articles ‚Üí ArticleController ‚Üí 
  await ArticleModel.getAll() ‚Üí 
  MongoDB Query ‚Üí 
  EJS Template ‚Üí HTML

// API –∑–∞–ø–∏—Ç–∏:
GET /users (JSON) ‚Üí UserController ‚Üí 
  await UserModel.getAll() ‚Üí 
  UserView.renderUsersList() ‚Üí JSON
```

## üìã **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**

### **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏**
```javascript
// server.mjs
app.set('view engine', 'pug');      // –î–µ—Ñ–æ–ª—Ç–Ω–∏–π –¥–ª—è Pug
app.engine('ejs', ejs.renderFile);  // –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –¥–ª—è EJS

// –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –∑ MongoDB –¥–∞–Ω–∏–º–∏
res.render('users/users', { users: await UserModel.getAll() });     // Pug
res.render('articles/articles.ejs', { articles: await ArticleModel.getAll() }); // EJS
```

### **–†–µ–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑–∞–º—ñ—Å—Ç—å mock**
- **–ë—É–ª–æ**: `existingUserIds = ['1', '2', '3', '123']`
- **–°—Ç–∞–ª–æ**: `await db.collection('users').find({}).toArray()`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: 13 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –ø–æ–≤–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é

–ü—Ä–æ–µ–∫—Ç —É—Å–ø—ñ—à–Ω–æ –º—ñ–≥—Ä–æ–≤–∞–Ω–æ –∑ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö mock –¥–∞–Ω–∏—Ö –Ω–∞ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É —Ö–º–∞—Ä–Ω—É –±–∞–∑—É –¥–∞–Ω–∏—Ö MongoDB Atlas –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—î—é —Ç–∞ –Ω–æ–≤–∏–º–∏ MongoDB –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏ –∑–≥—ñ–¥–Ω–æ –∑–∞–≤–¥–∞–Ω–Ω—è.

## üîß **–í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø–æ–º–∏–ª–∫–∏**

### **‚ùå‚û°Ô∏è‚úÖ Passport.js —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ MongoDB**
**–ü—Ä–æ–±–ª–µ–º–∞:** Passport.js –±—É–≤ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ —Ä–æ–±–æ—Ç—É –∑—ñ —Å—Ç–∞—Ç–∏—á–Ω–∏–º –º–∞—Å–∏–≤–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑–∞–º—ñ—Å—Ç—å MongoDB.

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (18.10.2025):**
- ‚úÖ **–ó–∞–º—ñ–Ω–µ–Ω–æ —Å—Ç–∞—Ç–∏—á–Ω–∏–π –º–∞—Å–∏–≤** –Ω–∞ MongoDB –∑–∞–ø–∏—Ç–∏ —á–µ—Ä–µ–∑ UserModel
- ‚úÖ **–û–Ω–æ–≤–ª–µ–Ω–æ LocalStrategy**: —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `UserModel.findByEmail()`
- ‚úÖ **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é**: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∑–∞–ø–∏—Ç–∏ –¥–æ MongoDB
- ‚úÖ **–î–æ–¥–∞–Ω–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫**: –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è MongoDB –æ–ø–µ—Ä–∞—Ü—ñ–π
- ‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –ø–æ–≤–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**: firstName, lastName, role –∑ MongoDB

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏ –∑ MongoDB Atlas (admin@example.com/admin123, user@example.com/user123).

### **‚ùå‚û°Ô∏è‚úÖ –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Ü–∏–∫–ª—ñ—á–Ω–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**
**–ü—Ä–æ–±–ª–µ–º–∞:** –¶–∏–∫–ª—ñ—á–Ω–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –º—ñ–∂ server.mjs ‚Üî passport.mjs ‚Üî models/User.mjs ‚Üî server.mjs

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (18.10.2025):**
- ‚úÖ **–°—Ç–≤–æ—Ä–µ–Ω–æ –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª database.mjs**: –í–∏–Ω–µ—Å–µ–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è MongoDB –≤ src/config/database.mjs
- ‚úÖ **–£—Å—É–Ω—É—Ç–æ —Ü–∏–∫–ª—ñ—á–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏**: –ú–æ–¥–µ–ª—ñ —Ç–µ–ø–µ—Ä —ñ–º–ø–æ—Ä—Ç—É—é—Ç—å db –∑ config/database.mjs
- ‚úÖ **–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É**: –ß—ñ—Ç–∫–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –º—ñ–∂ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- ‚úÖ **–î–æ–¥–∞–Ω–æ updatedAt –ø–æ–ª–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–ª—è —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ –∑ Passport
- ‚úÖ **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Ö –ø–æ–ª—ñ–≤**: –ë–µ–∑–ø–µ—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£—Å—É–Ω—É—Ç–æ –Ω–µ—Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å, –∫–æ–¥ —Å—Ç–∞—î –±—ñ–ª—å—à –º–æ–¥—É–ª—å–Ω–∏–º —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω–∏–º.